{% extends "base.html" %}
{% block content %}
<div class="mode-selector">
    <label for="game-mode">Game Mode:</label>
    <select id="game-mode" onchange="onModeChange()">
        <option value="auto">Auto Answer</option>
        <option value="manual-answer">Manual Answer</option>
        <option value="manual-feedback">Manual Feedback</option>
    </select>
    <input type="text" id="manual-answer-input" placeholder="Type answer"
        style="display:none;" />
    <button id="manual-answer-start" style="display:none;"
        onclick="startGame()">Start Game</button>
</div>
<div class="flex flex-col justify-center content-center">
    <div class="main-container">
        <div class="wordle_container">
            <div id="grid"></div>
        </div>
        <div class="flex flex-col">
            <div class="btn-container" style="margin-top: 10px;">
                <button
                    class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"
                    onclick="loadFullOptions()">Toggle Full Options</button>
            </div>
            <div id="full-options-panel" style="display:none; margin-top:20px;">
                <div id="loading-options" style="display: none;">Loading...
                </div>
                <div style="display:flex; gap:20px;">
                    <div style="flex:1;">
                        <h3>Viable Answers</h3>
                        <input type="text" id="search-answers"
                            placeholder="Search answers..."
                            oninput="filterFullOptions()"
                            style="width:100%; margin-bottom:5px;">
                        <ul id="full-viable-answers"></ul>
                    </div>
                    <div style="flex:1;">
                        <h3>Viable Guesses</h3>
                        <input type="text" id="search-guesses"
                            placeholder="Search guesses..."
                            oninput="filterFullOptions()"
                            style="width:100%; margin-bottom:5px;">
                        <ul id="full-viable-guesses"></ul>
                    </div>
                </div>
            </div>
            <div id="options-panel">
                <div id="total-remaining"
                    style="font-weight:bold; margin-bottom:10px;">Remaining
                    words: 0</div>

                <div class="options-sections">
                    <!-- Column 1: Viable Answers -->
                    <div class="options-section">
                        <h3>Viable Answers</h3>
                        <div class="options-subsection">
                            <h4>Top 20</h4>
                            <ul id="viable-answers"></ul>
                        </div>
                    </div>

                    <!-- Column 2: Entropy -->
                    <div class="options-section">
                        <h3>Entropy</h3>
                        <div class="options-subsection">
                            <h4>Top 10</h4>
                            <ul id="entropy-top"></ul>
                        </div>
                        <div class="options-subsection">
                            <h4>Bottom 10</h4>
                            <ul id="entropy-bottom"></ul>
                        </div>
                    </div>

                    <!-- Column 3: Expected Remaining -->
                    <div class="options-section">
                        <h3>Expected Remaining</h3>
                        <div class="options-subsection">
                            <h4>Top 10</h4>
                            <ul id="top-remaining"></ul>
                        </div>
                        <div class="options-subsection">
                            <h4>Bottom 10</h4>
                            <ul id="bot-remaining"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="btn-container">
        <button
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
            onclick="submitGuess()">Enter</button>
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2
        px-4 rounded" onclick="restartGame()">Restart</button>
    </div>
    <div id="feedback-log"
        style="flex-grow: 0; margin-top:10px; max-height:150px; overflow-y:auto; background:#f5f5f5; padding:5px; border:1px solid #ccc; font-family:monospace;">
    </div>

</div>

<p id="message"></p>
<script src="{{ url_for('static', filename='play.js') }}"></script>

{% endblock %}